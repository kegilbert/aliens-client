(this["webpackJsonpboard-test"]=this["webpackJsonpboard-test"]||[]).push([[0],{121:function(e,t,a){},213:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var o=a(0),l=a.n(o),n=a(20),s=a.n(n),c=(a(121),a(122),a(2)),r=a(10),i=a(46),d=a(218),b=a(219),j=a(220),p=a(221),u=a(223),m=a(222),y=a(224),h=a(226),O=a(227),x=a(35),g=a(114),f=a(37),S=a(72),v=a.n(S),w=(a(56),a(123),a.p+"static/media/hex-bg-2.b3512a1a.png"),C=a(1);var k=e=>{Object(o.useEffect)((()=>(document.body.style.backgroundColor="black",function(){document.body.style.backgroundColor="#cccccc"})),[]);return Object(C.jsx)(d.a,{fluid:!0,children:Object(C.jsx)(b.a,{xs:"12",style:{display:"flex",justifyContent:"center"},children:Object(C.jsxs)(j.a,{xs:"12",style:{display:"flex",justifyContent:"center"},children:[Object(C.jsx)("img",{src:w,alt:"home-bg",style:{height:"".concat(.9*window.innerHeight,"px"),width:null}}),"; "]})})})},N=a(36),T=a(19);const I=["Alula","Alya","Andromeda","Ariel","Astra","Astrid","Aurora","Bianca","Cassiopeia","Celeste","Ceres","Columba","Cordelia","Cressida","Elara","Estella","Esther","Europa","Faye","Gaia","Halley","Juliet","Larissa","Leda","Leia","Libra","Luna","Lyra","Maia","Miranda","Nevaeh","Nova","Ophelia","Pandora","Phoebe","Portia","Rhea","Sally","Sidra","Sitara","Soleil","Solstice","Solveig","Starla","Starling","Starr","Stella","Sunshine","Titania","Vega","Venus","Vesta","Aldrin","Altair","Apollo","Archer","Armstrong","Astro","Atlas","Buzz","Callisto","Calypso","Castor","Comet","Cosmo","Cygnus","Galilei","Galileo","Glenn","Hercules","Holmes","Janus","Jett","Jupiter","Leo","Luke","Meteor","Nash","Neil","Neptune","Oberon","Orion","Pallas","Perseus","Phoenix","Planet","Pluto","Pollux","Red","Rigel","Rocket","Saros","Sirius","Sol","Solar","Spock","Tarique","Taurus","Trek","Vulcan","Aries","Eclipse","Galaxy","Halo","Heaven","Juno","Mars","Marz","Mercury","Moon","Saturn","Shadow","Sky","Skye","Skylar","Star","Sun","Sunny"];window.location.hostname;var M=function(e){const t=void 0!==e.viewMode?e.viewMode:"",[a,n]=Object(o.useState)([{label:"1 - Safe",value:"safe",color:"white",numTiles:0,maxTiles:-1},{label:"2 - Dangerous",value:"dangerous",color:"grey",numTiles:0,maxTiles:-1},{label:"3 - Human Spawn",value:"hspawn",color:"purple",numTiles:0,maxTiles:1},{label:"4 - Alien Spawn",value:"aspawn",color:"red",numTiles:0,maxTiles:1},{label:"5 - Escape Pod",value:"escapepod",color:"orange",numTiles:0,maxTiles:4},{label:"6 - Remove",value:"remove",color:"",numTiles:0,maxTiles:-1}]),[s,r]=Object(o.useState)("grey"),[i,u]=Object(o.useState)(),[m,y]=Object(o.useState)(!1),[h,O]=Object(o.useState)("viewOnly"!==t),[x,g]=Object(o.useState)(a[0]);document.addEventListener("keydown",(function(e){const t=parseInt(e.keyCode);console.log(t),t>=49&&t<=48+a.length&&h&&(console.log("Setting space options"),g(a[t-49]))})),Object(o.useEffect)((()=>{console.log(I),e.socket.on("connect",(()=>{console.log(e.socket.id)})),e.socket.on("responseMessage",(e=>{console.log(e)})),e.socket.on("connect_error",(e=>{console.log("connect_error due to ".concat(e.message))}))}),[]);const f=(t,o)=>{u(o),e.socket.emit("incoming",{test:o});let l=Object(c.a)({},e.newMap);if(console.log(x.numTiles),console.log(x.maxTiles),x.numTiles===x.maxTiles){const a=Object.keys(e.newMap.tiles).find((t=>e.newMap.tiles[t].tileType===x.value));console.log(a),console.log(t),t.target.getStage().findOne("#".concat(a)).setAttrs({fill:"cyan"}),delete l.tiles[a],delete e.mapSelection.value.tiles[a]}else{const e=[...a],t=Object.keys(e).find((t=>e[t].value===x.value));x.numTiles+=1,e[t].numTiles=x.numTiles,n(e),console.log(a),console.log(x)}t.currentTarget.setAttrs({fill:x.color}),l.tiles[o]={tileType:x.value,color:x.color},e.setNewMap(l),y(!0)},[S,v]=l.a.useState([]),[w,k]=Object(o.useState)(!1),[M,L]=Object(o.useState)(!1),A=e=>{k(!0);var t=P.current.getAbsoluteTransform().copy();t.invert();let a=e.target.getStage().getPointerPosition();a=t.point(a),v([...S,{points:[a.x,a.y]}])},P=l.a.useRef(),E=e=>{if(!w||!M||0===S.length)return;const t=e.target.getStage();var a=P.current.getAbsoluteTransform().copy();a.invert();let o=t.getPointerPosition();o=a.point(o);let l={points:[]};0!==S.length&&(l=S[S.length-1]),l.points=l.points.concat([o.x,o.y]),S.splice(S.length-1,1,l),v(S.concat())},R={control:e=>Object(c.a)(Object(c.a)({},e),{},{borderColor:"grey !important",boxShadow:"none",marginBottom:"1em"})},[F,D]=Object(o.useState)(window.innerWidth<1e3?.6:1),[B,H]=Object(o.useState)(window.innerWidth<1e3?.6:1);return Object(C.jsxs)(d.a,{fluid:!0,children:["viewOnly"===t?Object(C.jsx)("div",{}):Object(C.jsx)(b.a,{children:Object(C.jsx)(p.a,{variant:"secondary",style:{boxShadow:"None"},onClick:()=>{h&&m?window.confirm("WARNING: Unsaved changes will be lost. Proceed?")&&O(!h):O(!h)},children:h?Object(C.jsx)("span",{children:" View Map "}):Object(C.jsx)("span",{children:" Map Editor "})})}),Object(C.jsxs)(b.a,{className:"align-items-center",children:[Object(C.jsx)(j.a,{sm:"12",md:"9",className:"align-items-center",children:Object(C.jsxs)(T.f,{pixelRatio:1.5,style:{marginTop:"1em",display:"flex",justifyContent:"center"},width:window.innerWidth*(window.innerWidth<1e3?1:.75),height:window.innerHeight*(window.innerHeight<700?.55:.85),onWheel:e=>{e.evt.preventDefault(),(e.evt.deltaY>15||e.evt.deltaY<15)&&(D(F-e.evt.deltaY/250),H(F-e.evt.deltaY/250))},scaleX:"viewOnly"===t?.45:F,scaleY:"viewOnly"===t?.45:B,onMouseDown:A,onMousemove:E,onTouchStart:A,onTouchmove:E,onMouseup:()=>{k(!1)},draggable:!M,children:[Object(C.jsx)(T.c,{children:h?(()=>{let t=[];for(let a=1;a<15;a++)for(let o=0;o<23;o++){let l=String.fromCharCode(65+o)+a.toString().padStart(2,"0");l in e.newMap.tiles&&"remove"===e.newMap.tiles[l].tileType||t.push(Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(T.g,{text:l,fontSize:12,x:26+54*o,y:31+63*a+o%2*31}),Object(C.jsx)(T.e,{perfectDrawEnabled:!1,shadow:!1,id:l,x:36+54*o,y:36+63*a+o%2*31,sides:6,radius:36,fill:l in e.mapSelection.value.tiles?e.mapSelection.value.tiles[l].color:"cyan",stroke:"black",strokeWidth:1,onClick:e=>{f(e,l)},onTap:e=>{f(e,l)},name:l,fillAfterStrokeEnabled:!0,opacity:.4,rotation:90},l)]}))}return t})():(()=>{let a=[];if(null===e.mapSelection)return a;for(let o=1;o<15;o++)for(let l=0;l<23;l++){let n=String.fromCharCode(65+l)+o.toString().padStart(2,"0");n in e.mapSelection.value.tiles&&"remove"!==e.mapSelection.value.tiles[n].tileType&&a.push(Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(T.g,{text:n,fontSize:12,x:26+54*l,y:31+63*o+l%2*31}),Object(C.jsx)(T.e,{perfectDrawEnabled:!1,shadow:!1,id:n,x:36+54*l,y:36+63*o+l%2*31,sides:6,radius:36,fill:n===i&&"viewOnly"!==t?"green":e.mapSelection.value.tiles[n].color,stroke:"black",strokeWidth:1,onClick:t=>{u(n),e.socket.emit("incoming",{test:n})},onTap:t=>{u(n),e.socket.emit("incoming",{test:n})},name:n,fillAfterStrokeEnabled:!0,opacity:.4,rotation:90},n)]}))}return a})()}),Object(C.jsx)(T.c,{ref:P,children:S.map(((e,t)=>Object(C.jsx)(T.d,{points:e.points,stroke:"#df4b26",strokeWidth:5,tension:.5,lineCap:"round",globalCompositeOperation:"source-over"},t)))})]})}),"viewOnly"===t?Object(C.jsx)("div",{}):Object(C.jsxs)(j.a,{sm:"3",className:"align-items-center",style:{paddingLeft:"1em"},children:[Object(C.jsx)(N.a,{options:e.mapOptions,value:e.mapSelection,onChange:t=>{console.log(t),e.setMapSelection(t),e.setNewMap(Object(c.a)({},t.value));const o=[...a];o.map((e=>{console.log(e),e.numTiles=t.value.meta[e.value]})),console.log("UPDATED SPACE OPTS META: "),console.log(o),n(o)},styles:R}),Object(C.jsx)(N.a,{options:a,value:x,onChange:e=>{g(e)},styles:R,isSearchable:!1}),Object(C.jsxs)(b.a,{children:[Object(C.jsx)(j.a,{children:Object(C.jsx)(p.a,{style:{backgroundColor:s,borderColor:s,boxShadow:"None",width:"100%"},onClick:e=>{L(!M),r("grey"===s?"#ff6961":"grey")},children:"Toggle Drawing"})}),Object(C.jsx)(j.a,{children:Object(C.jsx)(p.a,{style:{backgroundColor:"grey",borderColor:"grey",boxShadow:"None",width:"100%"},onClick:e=>{v([])},children:"Clear Drawing"})})]}),Object(C.jsx)(p.a,{style:{backgroundColor:"grey",boxShadow:"None",borderColor:"grey",width:"100%",marginTop:"1em"},onClick:t=>{const o=e.mapOptions.map((e=>e.label));let l=I.filter((e=>-1===o.indexOf(e))),n=1,s=I;for(;0===l.length;)n+=1,s=I.map((e=>"".concat(e,"-").concat(n))),l=s.filter((e=>-1===o.indexOf(e)));const r=prompt("Save new map as: ","".concat(l[0]));if(null!==r){let t={};a.map((e=>{t[e.value]=e.numTiles})),console.log(t),e.mapOptions.push({label:r,value:e.newMap}),e.setMapOptions(e.mapOptions),e.setMapSelection(e.mapOptions.at(-1)),e.socket.emit("save",Object(c.a)(Object(c.a)({mapName:r},e.newMap),{},{meta:t,user:e.userName})),y(!1)}},children:"Save New"}),Object(C.jsx)(p.a,{style:{backgroundColor:"grey",boxShadow:"None",borderColor:"grey",width:"100%",marginTop:"1em"},onClick:t=>{e.socket.emit("save",Object(c.a)(Object(c.a)({mapName:e.mapSelection.label},e.newMap),{},{user:e.userName})),e.setMapOptions(e.mapOptions.map((t=>e.mapSelection.label===t.label?{label:e.mapSelection.label,value:e.newMap}:t))),e.setMapSelection(Object(c.a)(Object(c.a)({},e.mapSelection),{},{value:e.newMap})),y(!1)},children:"Update"}),Object(C.jsx)(p.a,{style:{backgroundColor:"grey",boxShadow:"None",borderColor:"grey",width:"100%",marginTop:"1em"},onClick:t=>{e.setNewMap({tiles:{},meta:{}});const o=[...a];o.map((e=>{e.numTiles=0})),n(o),y(!1)},children:"Reset"})]})]})]})},L=a(225),A=a(111),P=a.n(A),E=a(112),R=a.n(E),F=a(95),D=a.n(F);a(212),a(213);var B=e=>{const{SearchBar:t}=F.Search,a=(e,t,a,o)=>{a.data=t};return Object(C.jsx)(D.a,{keyField:e.keyField,data:e.data,columns:e.columns,search:{defaultSearch:e.searchInput?e.searchInput:""},children:o=>Object(C.jsxs)("div",{style:{margin:"1%"},children:[!0===e.search?Object(C.jsx)(t,Object(c.a)(Object(c.a)({},o.searchProps),{},{onSearch:t=>{o.searchProps.onSearch(t),e.setSearchInput(t)},style:{boxShadow:"none",borderColor:"grey"},srText:""})):Object(C.jsx)("div",{}),Object(C.jsx)("hr",{style:{marginTop:"0.6em"}}),Object(C.jsx)(P.a,Object(c.a)(Object(c.a)({},o.baseProps),{},{rowStyle:e.rowStyle,editCellStyle:{fontSize:"small"},editorStyle:{fontSize:"small"},cellEdit:R()({mode:"click",blurToSave:!0,afterSaveCell:a}),rowClasses:e.rowClasses,selectRow:e.selectRow,expandRow:e.expandRow,defaultSorted:e.defaultSorted,ref:e.ref}))]})})},H=window.location.hostname;var W=function(e){const t=[{dataField:"lobbyName",text:"Lobby"},{dataField:"lobbyId",text:"Lobby ID",editable:!1},{dataField:"numPlayers",text:"Players"},{dataField:"private",text:"Private",editable:!1,isDummyField:!0,headerStyle:(e,t)=>({width:"5em",textAlign:"center"}),formatter:(e,t,a,o)=>t.private?Object(C.jsx)(f.b,{size:18}):Object(C.jsx)("div",{})}],a={mode:"radio",clickToSelect:!0,clickToEdit:!1,hideSelectColumn:!0,bgColor:"var(--uap-color-primary)",onSelect:(t,a,o,l)=>{if(""!==e.userName){if(""!==e.lobbyId){if(e.lobbyId===t.lobbyId)return;if(!window.confirm("Change from Lobby:\n\t".concat(e.lobby.lobbyName,"\nto Lobby\n\t").concat(t.lobbyName," ?")))return}if(t.private){var n=prompt("Please enter this lobby's password");return null===n?void alert("Nothing was entered"):void fetch("http://"+H+":5069/check_lobby_password",{method:"POST",mode:"cors",headers:{Accept:"application/json","Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({lobbyId:t.lobbyId,pw:n})}).then((e=>e.json())).then((a=>{a.status?(e.setLobbyId(t.lobbyId),e.setLobby(t),e.setOpenLobbyPanel(!0),e.socket.emit("joinLobby",{roomCode:t.lobbyId,lobbyName:t.lobbyName,userID:e.userName})):alert("Incorrect password")}))}e.setLobbyId(t.lobbyId),e.setLobby(t),e.setOpenLobbyPanel(!0),e.socket.emit("joinLobby",{roomCode:t.lobbyId,lobbyName:t.lobbyName,userID:e.userName})}else e.setShowUserModal(!0)}};return Object(C.jsxs)(d.a,{children:[Object(C.jsx)("br",{}),Object(C.jsx)(b.a,{className:"justify-content-center",children:Object(C.jsx)(j.a,{className:"justify-content-center d-flex",children:Object(C.jsx)("h1",{children:" Lobbies "})})}),Object(C.jsxs)(b.a,{className:"justify-content-center",children:[Object(C.jsx)(j.a,{xs:"3",className:"justify-content-center",children:Object(C.jsx)(p.a,{className:"primaryButton",onClick:()=>{if(""===e.userName)return void e.setShowUserModal(!0);const t=prompt("Lobby Name");if(null===t)return;const a=prompt("Password [leave blank for public lobby]");for(var o=Object(L.a)().slice(-6).toUpperCase();e.lobbies.map((e=>e.lobbyId)).includes(o);)o=Object(L.a)().slice(-6).toUpperCase();e.setLobbyId(o),e.setOpenLobbyPanel(!0),e.socket.emit("createLobby",{lobbyId:o,lobbyName:t,lobbyPW:a,creatorPlayer:e.userName})},children:"Create Lobby"})}),Object(C.jsx)(j.a,{xs:"3",className:"justify-content-center",children:Object(C.jsx)(p.a,{className:"primaryButton",onClick:()=>{console.log(prompt("Lobby ID: "))},disabled:!0,children:"Join Lobby By ID"})})]}),Object(C.jsx)(b.a,{className:"justify-content-center",children:Object(C.jsx)(j.a,{className:" d-flex justify-content-start",children:Object(C.jsx)(B,{keyField:"lobbyId",columns:t,data:e.lobbies.filter((function(e){return!e.inProgress})),search:!0,searchInput:e.searchInput,setSearchInput:e.setSearchInput,selectRow:a})})})]})};window.location.hostname;var U=function(e){const[t,a]=Object(o.useState)(!1),l=(Object(r.p)(),[{dataField:"playerName",text:"Player",editable:!1,style:{verticalAlign:"middle",fontSize:"1.25em"}},{dataField:"playerReady",text:"Ready",editable:!1,isDummyField:!0,headerStyle:(e,t)=>({width:"5em",textAlign:"center"}),formatExtraData:e.lobby,formatter:(e,t,a,o)=>o.players[a].playerReady?Object(C.jsx)(f.a,{size:24,color:"green"}):null}]),n={mode:"radio",clickToSelect:!0,clickToEdit:!1,hideSelectColumn:!0,onSelect:(t,o,l,n)=>{console.log(t),console.log(l);var s=Object(c.a)({},e.lobby);s.players[l].playerName===e.userName&&(a(!0),s.players[l].playerReady=!s.players[l].playerReady,e.socket.emit("registerPlayerReadyState",{playerName:e.userName,playerReady:s.players[l].playerReady,lobbyId:s.lobbyId}))}},s={control:e=>Object(c.a)(Object(c.a)({},e),{},{borderColor:"transparent !important",boxShadow:"none"})};return Object(o.useEffect)((()=>{t&&a(!1)}),[t]),void 0===e.lobby?Object(C.jsx)("div",{}):Object(C.jsxs)(d.a,{children:[Object(C.jsx)("br",{}),Object(C.jsxs)(b.a,{className:"justify-content-center",children:[Object(C.jsx)(j.a,{className:"justify-content-center d-flex",children:Object(C.jsx)("h1",{children:" Lobby "})}),Object(C.jsx)("hr",{})]}),Object(C.jsx)(b.a,{className:"justify-content-center",children:Object(C.jsx)(j.a,{className:" d-flex justify-content-center",children:Object(C.jsx)("h2",{children:void 0!==e.lobby?e.lobby.lobbyName:""})})}),Object(C.jsxs)(b.a,{className:"justify-content-center",style:{height:"5em"},children:[Object(C.jsx)(j.a,{xs:"2",className:" d-flex justify-content-center",children:Object(C.jsx)("h4",{children:" Map Selection: "})}),e.userName===e.lobby.host?Object(C.jsx)(j.a,{xs:"6",className:"justify-content-center",children:Object(C.jsx)(N.a,{options:e.mapOptions,value:e.lobbyMapSelection,onChange:t=>{e.socket.emit("setLobbyMap",{lobbyId:e.lobbyId,mapLabel:t.label})},filterOption:(e,t)=>"New"!==e.label,styles:s})}):Object(C.jsx)(j.a,{xs:"6",children:Object(C.jsx)("span",{style:{display:"inline",verticalAlign:"middle",fontSize:"1.5em",color:"red"},children:" Must be lobby host to edit map "})}),Object(C.jsx)(j.a,{xs:"4",className:"d-flex justify-content-center",style:{width:"30%"},children:""!==e.lobby.mapLabel?Object(C.jsx)(M,{userName:e.userName,newMap:e.newMap,setNewMap:e.setNewMap,mapOptions:e.mapOptions,setMapOptions:e.setMapOptions,viewMode:"viewOnly",mapSelection:e.mapOptions.filter((t=>t.label===e.lobby.mapLabel))[0],setMapSelection:e.setLobbyMapSelection,socket:e.socket}):Object(C.jsx)("div",{})})]}),Object(C.jsx)(b.a,{children:Object(C.jsx)(j.a,{xs:"6",children:t?Object(C.jsx)("div",{}):Object(C.jsx)(B,{keyField:"playerName",columns:l,data:e.lobby.players,selectRow:n})})}),Object(C.jsx)(b.a,{className:"d-flex justify-content-center",style:{position:"fixed",bottom:"5em",width:"50vw"},children:Object(C.jsx)(j.a,{className:" d-flex justify-content-center",children:Object(C.jsx)(p.a,{className:"warningButton",style:{marginTop:"1em"},onClick:()=>{e.socket.emit("leaveLobby",{roomCode:e.lobbyId,player:e.lobby.players.filter((t=>t.playerName===e.userName))[0]}),e.setOpenLobbyPanel(!1),e.setLobbyId("")},children:"Leave Lobby"})})}),e.lobby.players.every((e=>!0===e.playerReady))&&""!==e.lobby.mapLabel?Object(C.jsx)(b.a,{className:"d-flex justify-content-center",style:{position:"fixed",bottom:"2em",width:"50vw"},children:Object(C.jsx)(j.a,{xs:"8",className:"d-flex justify-content-center",children:Object(C.jsx)(p.a,{className:"primaryButton",style:{marginTop:"1em",width:"100%"},onClick:()=>{e.socket.emit("gameStart",{players:e.lobby.players,roomCode:e.lobby.lobbyId})},children:"Start Game"})})}):Object(C.jsx)("div",{})]})};a(108),a(214),a(215),window.location.hostname;var z=function(e){const[t,a]=Object(o.useState)([{label:"1 - Safe",value:"safe",color:"white",numTiles:0,maxTiles:-1},{label:"2 - Dangerous",value:"dangerous",color:"grey",numTiles:0,maxTiles:-1},{label:"3 - Human Spawn",value:"hspawn",color:"purple",numTiles:0,maxTiles:1},{label:"4 - Alien Spawn",value:"aspawn",color:"red",numTiles:0,maxTiles:1},{label:"5 - Escape Pod",value:"escapepod",color:"orange",numTiles:0,maxTiles:4},{label:"6 - Remove",value:"remove",color:"",numTiles:0,maxTiles:-1}]),[n,s]=Object(o.useState)("grey"),[c,r]=Object(o.useState)(),[i,u]=Object(o.useState)(),[m,y]=Object(o.useState)(!1),[h,O]=Object(o.useState)(t[0]),[x,g]=Object(o.useState)(!1),[f,S]=Object(o.useState)("");Object(o.useEffect)((()=>{e.socket.on("connect",(()=>{console.log(e.socket.id)})),e.socket.on("responseMessage",(e=>{console.log(e)})),e.socket.on("connect_error",(e=>{console.log("connect_error due to ".concat(e.message))}))}),[]),Object(o.useEffect)((()=>{void 0!==e.playerState&&(r(e.playerState.pos),u(e.playerState.pos))}),e.playerState);class w{constructor(){this.elements=[]}enqueue(e,t){this.elements.push({element:e,priority:t}),this.elements.sort(((e,t)=>e.priority-t.priority))}dequeue(){return this.elements.shift().element}isEmpty(){return 0===this.elements.length}}const k=(e,t,a,o)=>{e%2!==0&&a%2!==0?(t-=1,o-=1):e%2===0&&a%2===0&&(t+=1,o+=1);let l=Math.abs(a-e),n=Math.abs(o-t),s=Math.abs(l-n);return Math.max(l,n,s)},N=(e,t,a)=>{let o=new w,l=new Map,n=new Map,s=new Map;const c=t.match(/\D/g)[0].charCodeAt(0)-"A".charCodeAt(0),r=e.match(/\D/g)[0].charCodeAt(0)-"A".charCodeAt(0),i=parseInt(t.match(/\d+/g)[0]),d=parseInt(e.match(/\d+/g)[0]);for(n.set("".concat(r,",").concat(d),0),s.set("".concat(r,",").concat(d),k(r,d,c,i)),o.enqueue("".concat(r,",").concat(d),s.get("".concat(r,",").concat(d)));!o.isEmpty();){let e=o.dequeue(),[t,b]=e.split(",").map(Number);if(t===c&&b===i){let e=[];for(;l.has("".concat(t,",").concat(b));)e.unshift([t,b]),[t,b]=l.get("".concat(t,",").concat(b));return e.unshift([r,d]),e.map((e=>{return t=e[0],a=e[1],"".concat(String.fromCharCode("A".charCodeAt(0)+t)).concat(a.toString().padStart(2,"0"));var t,a}))}let j=I(t,b,a);for(let a of j){let[e,r]=a,d=n.get("".concat(t,",").concat(b))+1;(!n.has("".concat(e,",").concat(r))||d<n.get("".concat(e,",").concat(r)))&&(l.set("".concat(e,",").concat(r),[t,b]),n.set("".concat(e,",").concat(r),d),s.set("".concat(e,",").concat(r),d+k(e,r,c,i)),o.elements.some((t=>t.element==="".concat(e,",").concat(r)))||o.enqueue("".concat(e,",").concat(r),s.get("".concat(e,",").concat(r))))}}return null},I=(e,t,a)=>{let o=[],l=[];l=e%2===1?[[1,0],[1,1],[0,1],[-1,1],[-1,0],[0,-1]]:[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]];for(let n of l){let l=e+n[0],s=t+n[1];Object.keys(a).includes("".concat(String.fromCharCode("A".charCodeAt(0)+l)).concat(s.toString().padStart(2,"0")))&&o.push([l,s])}return o},M=(t,a)=>{if(e.noiseTileSelectEn)e.setNoiseTile(a);else{a.match(/\D/g)[0].charCodeAt(0),c.match(/\D/g)[0].charCodeAt(0),parseInt(a.match(/\d+/g)[0]),parseInt(c.match(/\d+/g)[0]);let t=N(i,a,e.mapSelection.value.tiles);const o=e.playerState.maxMovement;t.length-1<=o&&r(a)}},L=()=>{if(void 0===i)return[];let t=[];for(let a=1;a<15;a++)for(let o=0;o<23;o++){let l=String.fromCharCode(65+o)+a.toString().padStart(2,"0");l in e.mapSelection.value.tiles&&"remove"!==e.mapSelection.value.tiles[l].tileType&&t.push(Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(T.g,{text:l,fontSize:12,x:26+54*o,y:31+63*a+o%2*31}),Object(C.jsx)(T.e,{perfectDrawEnabled:!1,shadow:!1,id:l,x:36+54*o,y:36+63*a+o%2*31,sides:6,radius:36,fillRadialGradientStartPoint:{x:0,y:0},fillRadialGradientStartRadius:12,fillRadialGradientEndPoint:{x:0,y:0},fillRadialGradientEndRadius:50,fillRadialGradientColorStops:[0,e.mapSelection.value.tiles[l].color,.5,l==c?"#51ff0d":l==i&&c!==i?"blue":N(i,l,e.mapSelection.value.tiles).length-1<=e.playerState.maxMovement?"yellow":e.mapSelection.value.tiles[l].color],stroke:"black",strokeWidth:1,onClick:e=>{M(0,l)},onTap:e=>{M(0,l)},name:l,fillAfterStrokeEnabled:!0,opacity:.5,rotation:90},l)]}))}return t},[A,P]=l.a.useState([]),[E,R]=Object(o.useState)(!1),[F,D]=Object(o.useState)(!1),H=e=>{R(!0);var t=W.current.getAbsoluteTransform().copy();t.invert();let a=e.target.getStage().getPointerPosition();a=t.point(a),P([...A,{points:[a.x,a.y]}])},W=l.a.useRef(),U=e=>{if(!E||!F||0===A.length)return;const t=e.target.getStage();var a=W.current.getAbsoluteTransform().copy();a.invert();let o=t.getPointerPosition();o=a.point(o);let l={points:[]};0!==A.length&&(l=A[A.length-1]),l.points=l.points.concat([o.x,o.y]),A.splice(A.length-1,1,l),P(A.concat())},z=()=>{R(!1)},G=()=>{var t=[],a=[];let o=0;return e.turnHistory.filter((function(e){return e.player===f})).forEach((e=>{if("-"!==e.tile){if(a.length>0){let o=a[a.length-1];t.push(Object(C.jsx)(T.a,{points:[J(o),q(o),J(e.tile),q(e.tile)],pointerLength:10,pointerWidth:4,fill:"cyan",stroke:"cyan",strokeWidth:2,opacity:.7}))}a.push(e.tile),o=0}else if(a.length>0){let e=a[a.length-1];o+=1,o>1&&t.pop(),t.push(Object(C.jsx)(T.b,{x:J(e),y:q(e),radius:72*o,strokeWidth:3,stroke:"pink"}))}})),t},Y={mode:"radio",hideSelectColumn:!0,clickToSelect:!0,clickToEdit:!1,onSelect:(e,t,a,o)=>{e.player===f?S(""):S(e.player)}},J=e=>36+54*(e.match("[A-Z]")[0].charCodeAt(0)-"A".charCodeAt(0)),q=e=>{var t=parseInt(e.match("[0-9]+")[0]),a=e.match("[A-Z]")[0].charCodeAt(0)-"A".charCodeAt(0);return console.log(a),36+63*t+(a%2===0?0:36)},[V,_]=Object(o.useState)(1.5),[X,K]=Object(o.useState)(1.5);return void 0===e.playerState?Object(C.jsx)("div",{}):Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(d.a,{fluid:!0,children:[Object(C.jsxs)(b.a,{className:"d-flex",style:{height:"60vh"},children:[Object(C.jsx)(j.a,{xs:"8",xl:"8",className:"align-items-center d-flex",style:{height:"75vh"},children:Object(C.jsxs)(T.f,{pixelRatio:1.5,style:{marginTop:"1em",display:"flex",justifyContent:"center"},width:.65*window.innerWidth,height:window.innerWidth>1400?.85*window.innerHeight:.6*window.innerHeight,onWheel:e=>{e.evt.preventDefault(),(e.evt.deltaY>15||e.evt.deltaY<15)&&(_(V-e.evt.deltaY/250),K(V-e.evt.deltaY/250))},scaleY:X,scaleX:V,onMouseDown:H,onMousemove:U,onTouchStart:H,onTouchmove:U,onMouseup:z,draggable:!F,offsetX:window.innerWidth/10,children:[Object(C.jsx)(T.c,{children:L()}),Object(C.jsx)(T.c,{listening:!1,children:c!==i?Object(C.jsx)(T.a,{points:[J(i),q(i),J(c),q(c)],pointerLength:10,pointerWidth:4,fill:"black",stroke:"black",strokeWidth:2,opacity:.7}):Object(C.jsx)("div",{})}),Object(C.jsx)(T.c,{listening:!1,children:G()}),Object(C.jsx)(T.c,{ref:W,children:A.map(((e,t)=>Object(C.jsx)(T.d,{points:e.points,stroke:"#df4b26",strokeWidth:5,tension:.5,lineCap:"round",globalCompositeOperation:"source-over"},t)))})]})}),Object(C.jsxs)(j.a,{xs:"4",xl:"4",children:[Object(C.jsx)(b.a,{xs:"12",children:Object(C.jsx)(j.a,{xs:"12",children:Object(C.jsx)(B,{keyField:"player",rowStyle:(t,a)=>({backgroundColor:t.player===e.currPlayer?"var(--color-primary)":"inherit"}),columns:[{dataField:"player",text:"Player"}],data:e.playerTurnOrder.map((e=>({player:e})))})})}),Object(C.jsx)(b.a,{xs:"12",children:Object(C.jsx)(j.a,{xs:"12",children:e.currPlayer===e.userName?Object(C.jsx)(p.a,{className:"primaryButton",onClick:t=>{u(c),e.socket.emit("turnSubmit",{tile:c,tileType:e.mapSelection.value.tiles[c].tileType,lobbyId:e.lobby.lobbyId,playerId:e.userName})},disabled:c===i,style:{width:"90%",marginTop:"0em",marginLeft:"0em",borderColor:"grey",backgroundColor:c===i?"var(--color-warning)":"var(--color-primary)"},children:c===i?"Must Move":"End Turn"}):Object(C.jsx)("div",{})})}),window.innerWidth>1400?Object(C.jsx)(b.a,{xs:"12",children:Object(C.jsx)(j.a,{xs:"12",style:{overflowY:"auto",height:"45vh"},children:Object(C.jsx)(B,{keyField:"turn",rowStyle:(e,t)=>{let a="inherit";return"attack"===e.event?a="var(--color-danger)":e.player===f&&(a="var(--color-info)"),{backgroundColor:a}},selectRow:Y,columns:[{dataField:"turn",text:"Turn",sort:!0,editable:!1},{dataField:"player",text:"Player",sort:!0,editable:!1,style:{overflow:"hidden",whiteSpace:"nowrap"}},{dataField:"tile",text:"tile",editable:!1},{dataField:"event",text:"Event",editable:!1}],data:e.turnHistory})})}):Object(C.jsx)("div",{})]})]}),window.innerWidth<=1400?Object(C.jsx)(b.a,{xs:"12",children:Object(C.jsx)(j.a,{xs:"12",style:{overflowY:"auto",height:"25vh"},children:Object(C.jsx)(B,{keyField:"turn",rowStyle:(e,t)=>({backgroundColor:"attack"===e.event?"var(--color-danger)":"inherit"}),columns:[{dataField:"turn",text:"Turn",sort:!0,editable:!1},{dataField:"player",text:"Player",sort:!0,editable:!1,style:{overflow:"hidden",whiteSpace:"nowrap"}},{dataField:"tile",text:"tile",editable:!1},{dataField:"event",text:"Event",editable:!1}],data:e.turnHistory})})}):Object(C.jsx)("div",{}),Object(C.jsx)(b.a,{className:"align-items-center d-flex",children:Object(C.jsx)(j.a,{xs:"12",style:{position:"fixed",bottom:"6em"},children:Object(C.jsx)(p.a,{className:"warningButton",style:{width:"100%",height:"2.5em"},onClick:e=>{g(!x)},children:"Items: 0"})})}),Object(C.jsx)(b.a,{className:"align-items-center d-flex",children:Object(C.jsx)(j.a,{xs:"12",style:{opacity:"0.8",position:"fixed",bottom:"2.5em",backgroundColor:"alien"===e.playerState.role?"red":"green"},children:Object(C.jsxs)("h2",{style:{align:"center",flex:"display"},children:["ROLE: ",e.playerState.role.toUpperCase()]})})}),Object(C.jsx)(b.a,{className:"align-items-center d-flex",children:Object(C.jsx)(j.a,{xs:"12",style:{position:"fixed",bottom:"0em"},children:Object(C.jsxs)("h4",{style:{align:"center",flex:"display"},children:["Max Movement: ",e.playerState.maxMovement]})})}),Object(C.jsx)(v.a,{type:"bottom",isOpen:x,backdropClicked:()=>g(!1),noBackdrop:!1,size:30,children:Object(C.jsx)("div",{style:{overflow:"hidden",backgroundColor:"#B5BEC6",height:"100%",paddingBottom:"5em",opacity:"90%"},children:"Balls"})})]})})},G=window.location.hostname;const Y=Object(g.a)("http://"+G+":5069");var J=function(){const[e,t]=Object(o.useState)(!1),[a,l]=Object(o.useState)(""),[n,s]=Object(o.useState)(a),[g,S]=Object(o.useState)(""),[w,N]=Object(o.useState)(""),[T,I]=Object(o.useState)(),[L,A]=Object(o.useState)([]),[P,E]=Object(o.useState)(!1),[R,F]=Object(o.useState)({tiles:{},meta:{}}),[D,B]=Object(o.useState)([{label:"New",value:R}]),[H,G]=Object(o.useState)(D[0]),[J,q]=Object(o.useState)(null),[V,_]=Object(o.useState)(""),[X,K]=Object(o.useState)(),[Z,Q]=Object(o.useState)(void 0),[$,ee]=Object(o.useState)(!1),[te,ae]=Object(o.useState)(!1),[oe,le]=Object(o.useState)(""),[ne,se]=Object(o.useState)(),[ce,re]=Object(o.useState)([]),[ie,de]=Object(o.useState)([]),[be,je]=Object(o.useState)(""),pe=Object(o.useRef)(T),ue=Object(o.useRef)(n),me=Object(r.p)(),ye=()=>{ee(!1),t(!1)};Object(o.useEffect)((()=>{var e=window.localStorage.getItem("username");"null"!==e&&(Y.emit("registerUsername",{username:e}),s(e)),Y.on("emitMapList",(e=>{B([{label:"New",value:{tiles:[],meta:{safe:0,dangerous:0,hspawn:0,aspawn:0,escapepod:0,remove:0}}},...e])})),Y.on("lobbiesList",(e=>{A(e)})),Y.on("playerEvent",(e=>{Q(Object(c.a)(Object(c.a)({},e),{},{state:"playerEvent"}))})),Y.on("roomEvent",(e=>{Q(Object(c.a)(Object(c.a)({},e),{},{state:"roomEvent"}))})),Y.on("updateCurrentPlayer",(e=>{je(e.currPlayer)})),Y.on("roleAssignment",(e=>{K(e.player)})),Y.on("joinCreatorToLobby",(e=>{I(L.filter((e=>e.lobbyId===w))[0])})),Y.on("usernameRegistered",(e=>{l(ue.current),window.localStorage.setItem("username",ue.current),ye()})),Y.on("usernameUnavailable",(e=>{ee(!0)})),Y.on("gameStartResp",(e=>{E(!1),me("/gamesession/".concat(pe.current.lobbyId),{replace:!0})})),Y.on("turnOrder",(e=>{de(e.turnOrder),je(e.currPlayer)})),Y.on("connect",(e=>{Y.emit("getLobbies",{}),Y.emit("getMapList",{})}))}),[]);const he=()=>Object(C.jsxs)(d.a,{children:[Object(C.jsx)(b.a,{children:Object(C.jsx)(j.a,{children:Object(C.jsxs)("span",{children:[" Select tile to generate noise at: ",oe," "]})})}),Object(C.jsx)(b.a,{children:Object(C.jsx)(j.a,{children:Object(C.jsx)(p.a,{className:"primaryButton",onClick:e=>{ae(!1),Y.emit("noiseInSector",{state:"noise",tile:oe,playerId:Z.playerId,numHeldCards:Z.playerNumHeldCards,lobbyId:T.lobbyId,includeSelf:!0}),x.c.dismiss(ne),se(),le(""),Q(void 0)},children:" Submit "})})})]});Object(o.useEffect)((()=>{""!==w&&I(L.filter((e=>e.lobbyId===w))[0])}),[L]),Object(o.useEffect)((()=>{x.c.update(ne,{render:he,toastId:ne})}),[oe]),Object(o.useEffect)((()=>{if(void 0!==Z){var e=Z.card,t=Z.tile,a=Z.playerId,o=e.split(" - ")[0];if("attack"===o&&(a="".concat(a," -> ").concat(Z.targetPlayer)),"any"!==e&&re([...ce,{turn:ce.length,event:o,tile:t,player:a}]),"attack"===e)x.c.error(Object(C.jsxs)("div",{children:[Object(C.jsx)("h3",{children:a}),Object(C.jsx)("hr",{}),Z.targetPlayer," killed by ",a," at: ",t]}),{closeOnClick:!1,autoClose:5e3});else if("silence"===e)x.c.success(Object(C.jsxs)("div",{children:[Object(C.jsx)("h3",{children:a}),Object(C.jsx)("hr",{}),"Silence in all sectors"]}),{closeOnClick:!1,autoClose:5e3});else if(e.includes("silence -"))x.c.success(Object(C.jsxs)("div",{children:[Object(C.jsx)("h3",{children:a}),Object(C.jsx)("hr",{}),"Silence in all sectors + Item!",e.split(" - ")[1]]}),{closeOnClick:!1,autoClose:5e3});else if("noise"===e)x.c.error(Object(C.jsxs)("div",{children:[Object(C.jsx)("h3",{children:a}),Object(C.jsx)("hr",{}),"You hear a noise in sector ",t]}),{closeOnClick:!1,autoClose:5e3});else if("any"===e)return ae(!0),void se(x.c.warning(he,{closeOnClick:!1,autoClose:!1,draggable:!1,closeButton:!1}));"playerEvent"===Z.state&&Y.emit("noiseInSector",{state:e.includes("silence")?"silence":"noise",tile:e.includes("silence")?"-":t,playerId:Z.playerId,numHeldCards:Z.playerNumHeldCards,lobbyId:T.lobbyId,includeSelf:!1}),Q(void 0)}}),[Z]),Object(o.useEffect)((()=>{if(pe.current=T,void 0!==T){let e=D.filter((e=>e.label===T.mapLabel));1===e.length&&q(e[0])}}),[T]),Object(o.useEffect)((()=>{ue.current=n}),[n]);const Oe=()=>{console.log("Registering username: "+n),Y.emit("registerUsername",{username:n})};return Object(C.jsxs)("div",{className:"App",children:[void 0===X?Object(C.jsx)(u.a,{collapseOnSelect:!0,expand:"sm",bg:"dark",variant:"dark",sticky:"top",children:Object(C.jsxs)(d.a,{className:"me-auto",children:[Object(C.jsx)(u.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(C.jsxs)(u.a.Collapse,{id:"responsive-navbar-nav",children:[Object(C.jsxs)(m.a,{activeKey:window.location.pathname,fill:!0,className:"me-auto",children:[Object(C.jsx)(m.a.Link,{as:i.b,style:{color:"orange"},activeStyle:{textDecoration:"underline",textDecorationThickness:"0.2em",textUnderlineOffset:"0.5em"},exact:!0,to:"/",children:"| Home | "}),Object(C.jsx)(m.a.Link,{as:i.b,style:{color:"orange"},activeStyle:{textDecoration:"underline",textDecorationThickness:"0.2em",textUnderlineOffset:"0.5em"},to:"/editor",children:"| Map Editor | "}),Object(C.jsx)(m.a.Link,{as:i.b,style:{color:"orange"},activeStyle:{textDecoration:"underline",textDecorationThickness:"0.2em",textUnderlineOffset:"0.5em"},to:"/lobbies",children:"| Lobbies | "})]}),Object(C.jsxs)(u.a.Brand,{style:{marginTop:"-1em",marginBottom:"-1em",marginRight:"0em"},children:[w.length>0?Object(C.jsx)("span",{style:{color:"orange",fontSize:"0.8em",marginRight:"1em",cursor:"pointer"},onClick:()=>{E(!0)},children:"| Current Lobby |"}):Object(C.jsx)("div",{}),Object(C.jsx)(f.d,{size:42,style:{cursor:"pointer"},onClick:e=>{t(!0)}})]})]})]})}):Object(C.jsx)("div",{}),Object(C.jsx)(r.c,{children:Object(C.jsx)(r.a,{path:"/",exact:!0,element:Object(C.jsx)(k,{})})}),Object(C.jsx)(r.c,{children:Object(C.jsx)(r.a,{path:"/editor",element:Object(C.jsx)(M,{userName:a,newMap:R,setNewMap:F,mapOptions:D,setMapOptions:B,mapSelection:H,setMapSelection:G,socket:Y})})}),Object(C.jsx)(r.c,{children:Object(C.jsx)(r.a,{path:"/lobbies",element:Object(C.jsx)(W,{userName:a,searchInput:g,lobbies:L,lobby:T,setLobby:I,setSearchInput:S,lobbyId:w,setLobbyId:N,setOpenLobbyPanel:E,setShowUserModal:t,socket:Y})})}),Object(C.jsx)(r.c,{children:Object(C.jsx)(r.a,{path:"/gamesession/:id",element:Object(C.jsx)(z,{userName:a,searchInput:g,lobbies:L,lobby:T,setLobby:I,setSearchInput:S,lobbyId:w,setLobbyId:N,setOpenLobbyPanel:E,socket:Y,mapSelection:J,gameCodeId:V,playerName:n,playerState:X,noiseTileSelectEn:te,setNoiseTile:le,turnHistory:ce,playerTurnOrder:ie,currPlayer:be})})}),Object(C.jsxs)(y.a,{show:e,onHide:ye,onKeyDown:e=>{"Enter"===e.key&&Oe()},children:[Object(C.jsx)(y.a.Header,{children:Object(C.jsx)(y.a.Title,{children:"User Info"})}),Object(C.jsx)(y.a.Body,{children:Object(C.jsxs)(d.a,{children:[Object(C.jsx)(b.a,{className:"align-items-center",children:Object(C.jsx)(j.a,{xs:12,className:"align-items-center",style:{display:"flex",justifyContent:"center"},children:Object(C.jsxs)(h.a,{children:[Object(C.jsx)(O.a,{"aria-label":"User Name",value:n,style:{boxShadow:"none",borderColor:"grey"},onChange:e=>{s(e.target.value)}}),Object(C.jsx)(h.a.Text,{children:Object(C.jsx)(f.c,{})})]})})}),$?Object(C.jsx)(b.a,{className:"align-items-center",children:Object(C.jsx)(j.a,{className:"align-items-center d-flex",children:Object(C.jsx)("span",{style:{color:"red"},children:" UNAVAILABLE "})})}):Object(C.jsx)("div",{})]})}),Object(C.jsxs)(y.a.Footer,{children:[Object(C.jsx)(p.a,{variant:"secondary",onClick:e=>{s(a),ye()},children:"Close"}),Object(C.jsx)(p.a,{variant:"primary",onClick:e=>{Oe()},children:"Save Changes"}),"        "]})]}),Object(C.jsx)(v.a,{type:"bottom",isOpen:P,backdropClicked:()=>E(!1),noBackdrop:!1,size:85,children:Object(C.jsx)("div",{style:{overflow:"scroll",backgroundColor:"#B5BEC6",height:"100%",paddingBottom:"5em",opacity:"100%"},children:Object(C.jsx)(U,{setOpenLobbyPanel:E,lobbyId:w,setLobbyId:N,lobby:T,setLobby:I,mapOptions:D,setMapOptions:B,newMap:R,setNewMap:F,lobbyMapSelection:J,setLobbyMapSelection:q,gameCodeId:V,setGameCodeId:_,userName:a,socket:Y})})}),Object(C.jsx)(x.b,{newestOnTop:!0,transition:x.a,draggablePercent:20})]})};var q=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,228)).then((t=>{let{getCLS:a,getFID:o,getFCP:l,getLCP:n,getTTFB:s}=t;a(e),o(e),l(e),n(e),s(e)}))};s.a.render(Object(C.jsx)(l.a.StrictMode,{children:Object(C.jsx)(i.a,{children:Object(C.jsx)(J,{})})}),document.getElementById("root")),q()},56:function(e,t,a){}},[[217,1,2]]]);
//# sourceMappingURL=main.ca975267.chunk.js.map